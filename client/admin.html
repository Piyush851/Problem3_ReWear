<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ReWear Admin Portal</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f3f4f6;
      margin: 0;
      padding: 20px;
    }

    h2 {
      color: #1f2937;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: white;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    th, td {
      border: 1px solid #e5e7eb;
      padding: 12px;
      text-align: left;
    }

    th {
      background-color: #10b981;
      color: white;
    }

    button {
      margin-right: 5px;
      padding: 6px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .approve { background-color: #10b981; color: white; }
    .reject { background-color: #ef4444; color: white; }
    .delete { background-color: #6b7280; color: white; }
    .view { background-color: #3b82f6; color: white; }

    select {
      margin-bottom: 15px;
      padding: 5px;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <h2>ReWear Admin Portal</h2>

  <div class="top-bar">
    <button onclick="openAddForm()">➕ Add New Item</button>
    <div>
      <label for="categoryFilter"><strong>Filter by Category:</strong></label>
      <select id="categoryFilter">
        <option value="All">All</option>
        <option value="Dresses">Dresses</option>
        <option value="Outerwear">Outerwear</option>
        <option value="Tops">Tops</option>
      </select>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Item</th>
        <th>Uploader</th>
        <th>Category</th>
        <th style="display: none;">Description</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr data-image="https://i.imgur.com/GN6U8vC.jpg">
        <td>Denim Jacket</td>
        <td>user123</td>
        <td>Outerwear</td>
        <td class="description" style="display: none;">Warm denim jacket for cold weather.</td>
        <td>
          <button class="view">View</button>
          <button class="approve">Approve</button>
          <button class="reject">Reject</button>
          <button class="delete">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Modal View -->
  <div id="itemModal" style="display:none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:10; justify-content:center; align-items:center;">
    <div style="background:white; padding:20px; border-radius:8px; width:400px;">
      <img id="modalImage" src="" alt="Item Image" style="width:100%; border-radius:8px; margin-bottom:15px;" />
      <h3 id="modalTitle">Item Title</h3>
      <p id="modalUploader">Uploader:</p>
      <p id="modalCategory">Category:</p>
      <p id="modalDescription">Description:</p>
      <button onclick="closeModal()">Close</button>
    </div>
  </div>

  <!-- Add Item Modal -->
  <div id="addItemModal" style="display:none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:11; justify-content:center; align-items:center;">
    <div style="background:white; padding:20px; border-radius:8px; width:350px;">
      <h3>Add New Item</h3>
      <input id="newItemName" type="text" placeholder="Item Name" style="width:100%; margin:8px 0; padding:8px;" />
      <input id="newUploader" type="text" placeholder="Uploader Name" style="width:100%; margin:8px 0; padding:8px;" />
      <input id="newCategory" type="text" placeholder="Category" style="width:100%; margin:8px 0; padding:8px;" />
      <input id="newImage" type="text" placeholder="Image URL" style="width:100%; margin:8px 0; padding:8px;" />
      <textarea id="newDescription" placeholder="Description" style="width:100%; margin:8px 0; padding:8px;"></textarea>
      <button onclick="addNewItem()">Add</button>
      <button onclick="closeAddForm()">Cancel</button>
    </div>
  </div>

  <script>
    const modal = document.getElementById('itemModal');

    function closeModal() {
      modal.style.display = 'none';
    }

    function openAddForm() {
      document.getElementById('addItemModal').style.display = 'flex';
    }

    function closeAddForm() {
      document.getElementById('addItemModal').style.display = 'none';
    }

    function reapplyEventListeners() {
      document.querySelectorAll('.approve').forEach(btn => {
        btn.onclick = function () {
          alert('Item Approved ✅');
          this.closest('tr').style.backgroundColor = '#d1fae5';
        };
      });

      document.querySelectorAll('.reject').forEach(btn => {
        btn.onclick = function () {
          alert('Item Rejected ❌');
          this.closest('tr').style.backgroundColor = '#fee2e2';
        };
      });

      document.querySelectorAll('.delete').forEach(btn => {
        btn.onclick = function () {
          if (confirm('Are you sure you want to delete this item?')) {
            this.closest('tr').remove();
          }
        };
      });

      document.querySelectorAll('.view').forEach(btn => {
        btn.onclick = function () {
          const row = this.closest('tr');
          document.getElementById('modalTitle').innerText = row.children[0].innerText;
          document.getElementById('modalUploader').innerText = 'Uploader: ' + row.children[1].innerText;
          document.getElementById('modalCategory').innerText = 'Category: ' + row.children[2].innerText;
          document.getElementById('modalDescription').innerText = 'Description: ' + row.querySelector('.description').innerText;
          document.getElementById('modalImage').src = row.getAttribute('data-image');
          modal.style.display = 'flex';
        };
      });
    }

    function addNewItem() {
      const item = document.getElementById('newItemName').value;
      const uploader = document.getElementById('newUploader').value;
      const category = document.getElementById('newCategory').value;
      const image = document.getElementById('newImage').value;
      const description = document.getElementById('newDescription').value;

      const tbody = document.querySelector('tbody');
      const newRow = document.createElement('tr');
      newRow.setAttribute('data-image', image);
      newRow.innerHTML = `
        <td>${item}</td>
        <td>${uploader}</td>
        <td>${category}</td>
        <td class="description" style="display:none;">${description}</td>
        <td>
          <button class="view">View</button>
          <button class="approve">Approve</button>
          <button class="reject">Reject</button>
          <button class="delete">Delete</button>
        </td>
      `;

      tbody.appendChild(newRow);
      reapplyEventListeners();
      closeAddForm();
    }

    const categoryFilter = document.getElementById('categoryFilter');
    categoryFilter.addEventListener('change', function () {
      const selected = this.value.toLowerCase();
      const rows = document.querySelectorAll('tbody tr');

      rows.forEach(row => {
        const category = row.children[2].innerText.toLowerCase();
        if (selected === 'all' || category === selected) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      });
    });

    reapplyEventListeners();
  </script>
</body>
</html>
